<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <title>Booking Appointment</title>
    <style>
        /* form { margin-bottom: 0px; } */
        ul { list-style-type: none; padding: 0; }
        li { margin: 10px 0; padding: 10px; border: 1px solid #ccc; }
        .actions { margin-top: 10px; }
        .btn {
            display: inline-block;
            padding: 0.25rem 1rem;
            text-decoration: none;
            font: inherit;
            border: 1px solid #00695c;
            color: #00695c;
            background: white;
            border-radius: 3px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <h1>Booking Appointment App</h1>
    <form id="bookingForm" action="/<% if (editing) { %>edit-user<% } else { %>add-user<% } %>" method="POST">
        <label for="username">Username:</label>
        <input type="text" id="username" name="name" value="<% if (editing) { %><%= user.name %><% } %>" required><br><br>
        <label for="phoneNumber">Phone Number:</label>
        <input type="text" id="phoneNumber" name="phoneNumber" value="<% if (editing) { %><%= user.phoneNumber %><% } %>" required><br><br>
        <label for="email">Email:</label>
        <input type="email" id="email" name="email" value="<% if (editing) { %><%= user.email %><% } %>" required><br><br>
        <% if (editing) { %>
            <input type="hidden" value="<%= user.id %>" name="userId">
        <% } %>
        <button type="submit"><% if (editing) { %>Update User<% } else { %>Submit<% } %></button>
    </form>
    <% if(!editing) { %>
    <h2>Users</h2>
    
    <% if(users.length>0) { %>
        <% for(let user of users) { %>
            <ul>
                <li>
                    <div style="padding: 2px;"><strong>Username:</strong> <%= user.name %></div>
                    <div style="padding: 2px;"><strong>Email:</strong> <%= user.email %></div>
                    <div style="padding: 2px; display: flex;">
                        <a href="/edit-user/<%= user.id %>?edit=true" style="margin-right: 10px;" class="btn">Edit</a>
                        
                        <form action="/delete-user" method="POST">
                            <input type="hidden" name="userId" value="<%= user.id %>">
                            <button class="btn" type="submit">Delete</button>
                        </form>
                    </div>
                </li>
            </ul>            
        <% } %>
    <% } else { %>
            <h1>No Products Found!</h1>
    <% } %>
    <% } %>
</body>
</html>
